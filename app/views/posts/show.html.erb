
<html>
  <head>
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <script src="http://htmlcoder.me/preview/worthy/v.1.0/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.1/handlebars.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">


<style>
  *.youtube-videogallery-container {
    display: block;
    list-style: none;
    margin: 0 0 0 0;
    padding: 0 0 0 0;
}

*.youtube-videogallery-item {
	border-radius: 5px;
	box-shadow: 3px 3px 6px rgba(0,0,0,0.5);
    display: inline-block;
    line-height: 0;
    list-style: none;
	margin-bottom: 10px;
	margin-right: 14px;
	overflow: hidden;
}
*.youtube-videogallery-compact {
    font-size: 0;
}
*.youtube-videogallery-compact *.youtube-videogallery-item,
*.youtube-videogallery-compact *.youtube-videogallery-img{
    box-shadow: 0 0 0;
    border-radius: 0;
    margin: 0 0 0 0;
}
*.youtube-videogallery-compact *.youtube-videogallery-title {
    font-size: 11px;
}
a.youtube-videogallery-link {
    display: inline-block;
	position: relative;
}
a.youtube-videogallery-link:hover img.youtube-videogallery-play, 
a.youtube-videogallery-link:focus img.youtube-videogallery-play {
	opacity: 1;
}
*.youtube-videogallery-play {
	left:50%;
	opacity: 0.7;
	position: absolute;
	top:50%;
	z-index: 1;
}
*.youtube-videogallery-title {
    background: #000;
    background-color: rgba(0,0,0,0.7);
    bottom: 0;
    color:#fff;
    display: block;
    max-height: 1.5em;
    left:0;
    line-height: 150%;
    overflow: hidden;
    position: absolute;
    text-align: center;
    width: 100%;
    z-index: 1;
}
*.youtube-videogallery-allowtitle *.youtube-videogallery-title {
    height: auto;
}
*.youtube-videogallery-img {
	border-radius: 5px;
}
*.youtube-videogallery-screen-reader-only {
    position: absolute;
    left:-9999px;
}
div.youtube-videogallery-bodycover {
    background-color: #000;
    height: 100%;
    left:0;
    opacity: 0;
    position: absolute;
    top:0;
    width:100%;
    z-index: 100;
}
div.youtube-videogallery-display {
    background-color: #000;
    border-radius: 5px;
    box-shadow: 3px 3px 7px #000;
    left:50%;
    opacity: 0;
    padding: 3px;
    position: fixed;
    top:50%;
    z-index: 101;
}
div.youtube-videogallery-bodycover,
div.youtube-videogallery-display {
    transition: all 300ms;
    transform: scale(0);
    -webkit-transform: scale(0);
}
body.youtube-videogallery-active div.youtube-videogallery-bodycover,
body.youtube-videogallery-active div.youtube-videogallery-display {
    display: block;
    transform: scale(1);
    -webkit-transform: scale(1);
}
body.youtube-videogallery-active div.youtube-videogallery-bodycover {opacity: 0.5}
body.youtube-videogallery-active div.youtube-videogallery-display { opacity: 1}
    </style>
  </head>
  <body>
<div id="post_show">
  <label id="string">
    <h1><%= @post.title %></h1>
  </label>
  <p class="username">
    Shared by
    <%= @post.user.name %>
    about
    <%= time_ago_in_words(@post.created_at) %>
  </p>
  <div class="clearfix">
    <div class="post_image_description">
      <%= image_tag @post.image.url(:medium) %>
      <div class="description">
        <%= simple_format(@post.description) %>
      </div>
    </div>
    <div class="post_data">
      <%= link_to "Visit Link", @post.link, class: "button" %>
      <%= link_to like_post_path(@post), method: :get, class: "data" do %>
        <i class="fa fa-thumbs-o-up"></i>
        <%= pluralize(@post.get_upvotes.size, "Like") %>
      <% end %>
      <%= link_to dislike_post_path(@post), method: :get, class: "data" do %>
        <i class="fa fa-thumbs-o-down"></i>
        <%= pluralize(@post.get_downvotes.size, "Dislike") %>
      <% end %>
      <p class="data">
        <i class="fa fa-comments-o"></i>
        <%= pluralize(@post.comments.count, "Comment") %>
      </p>
      <% if @post.user == current_user %>
        <%= link_to "Edit", edit_post_path(@post), class: "data" %>
        <%= link_to "Delete", post_path(@post), method: :delete, data: { confirm: "Are you sure?" }, class: "data" %>
      <% end %>
    </div>
    
  </div>
</div>
<div id="comments">
  <h2 class="comment_count">
    <%= pluralize(@post.comments.count, "Comment") %>
  </h2>
  <% @comments.each do |comment| %>
    <div class="comment">
      <p class="username">
        <%= comment.user.name %>
      </p>
      <p class="content">
        <%= comment.content %>
      </p>
    </div>
  <% end %>
  <%= render "comments/form" %>
</div>
  
   <div class="container">
    <h2>Discography</h2>
    <p>Click an album cover to hear a 30 second preview, or click the button to play the album on Spotify!</p><br />
    <div id="results"></div>
     <script id="results-template" type="text/x-handlebars-template">
    {{#each albums.items}}
    <div style="background-image:url({{images.0.url}})" data-album-id="{{id}}" class="cover"><a href="{{external_urls.spotify}}"><div class="spotify-button"><img src="https://developer.spotify.com/wp-content/uploads/2014/06/play_on_spotify-green.png" /></div></a></div>
    {{/each}}
</script>


<script>
// find template and compile it
var templateSource = document.getElementById('results-template').innerHTML,
    template = Handlebars.compile(templateSource),
    resultsPlaceholder = document.getElementById('results'),
    playingCssClass = 'playing',
    audioObject = null;

var fetchTracks = function (albumId, callback) {
    $.ajax({
        url: 'https://api.spotify.com/v1/albums/' + albumId,
        success: function (response) {
            callback(response);
        }
    });
};

var searchAlbums = function (query) {
    $.ajax({
        url: 'https://api.spotify.com/v1/search',
        data: {
            q: 'artist:' + query,
            type: 'album',
            market: "US"
        },
        success: function (response) {
            resultsPlaceholder.innerHTML = template(response);
        }
    });
};

results.addEventListener('click', function(e) {
    var target = e.target;
    if (target !== null && target.classList.contains('cover')) {
        if (target.classList.contains(playingCssClass)) {
            audioObject.pause();
        } else {
            if (audioObject) {
                audioObject.pause();
            }
            fetchTracks(target.getAttribute('data-album-id'), function(data) {            
                audioObject = new Audio(data.tracks.items[0].preview_url);
                audioObject.play();
                target.classList.add(playingCssClass);
                audioObject.addEventListener('ended', function() {
                    target.classList.remove(playingCssClass);
                });
                audioObject.addEventListener('pause', function() {
                    target.classList.remove(playingCssClass);
               });
            });
        }
    }
});
$( document ).ready(function(){
	
			var val1= $("#string").text();
			searchAlbums(val1);
	
});
 
</script>
     
    
 <section>
<div id="tabs">
    <ul>
        <li>            <a href="#a">Billboard Top Charts</a>        </li> 
        <li>            <a href="#b">Europe Top Charts</a>        </li>
        <li>            <a href="#c">USA Top Charts</a>        </li>
        
    </ul>
    <div id="a">    <div class="container">    <ul class="youtube-video-gallery1">    </ul>    </div>    </div>
    <div id="b">    <div class="container">    <ul class="youtube-video-gallery2">    </ul>    </div>    </div>
    <div id="c">    <div class="container">    <ul class="youtube-video-gallery3">    </ul>    </div>    </div>
</div>

</section>
     <script type="text/javascript">
    $('#tabs')
    .tabs()
    .addClass('ui-tabs-vertical ui-helper-clearfix');

</script>
  </body>
    
<script>
     /**
 * youtubeVideoGallery plugin for jquery
 * Simple video gallery for youtube, for more details see http://plugins.jquery.com/youtubevideogallery
 *
 * @author clanceyp
 * @see http://plugins.jquery.com/youtubevideogallery/
 * @version 1.3.0
 *
 */


;(function($) {
"use strict";

    $.fn.extend({
        youtubeVideoGallery:function(options) {
            var version = '1.3.0',
                isLegacyIE = (/\bMSIE [4|5|6|7]/.test(navigator.userAgent)),
                defaults = {
                    assetFolder : '',
                    fancybox : {
                        arrows : false,
                        closeBtn : true,
                        closeEffect : 'fade',
                        helpers : {
                            media : {},
                            buttons : {}
                        },
                        openEffect : 'fade'
                    },
                    forceLegacyIE:false,
                    iframeTemplate:'<iframe title="Youtube video player" id="youtube-videogallery-iframe" style="height:{options.innerHeight}px;width:{options.innerWidth}px;" frameborder="0" src="about:blank" />',
                    innerHeight:344,
                    innerWidth:425,
                    newWindow: '(opens in a new window)',
                    playButton: 'play-button-red@40.png',
                    plugin:'self',
                    style:'',
                    title:'default',
                    thumbWidth:150,
                    videos:[],
                    urlImg : 'http://img.youtube.com/vi/$id/0.jpg',
                    urlEmbed : 'http://www.youtube.com/embed/$id',
                    urlLink : 'http://www.youtube.com/watch?v=$id'
                };

            this.test = {};
            this.version = version;

            function log(message){
                if ('console' in window && window.console.log){
                    window.console.log(message);
                }
            }
            function getVideoLinks($this){
                var arr = [],
                    a = $this.find("a");
                a.each(function(i, el){
                    arr.push({
                        id: getId( $(el).attr('href') ),
                        title:$(el).text()
                    });
                });
                return arr;
            }
            function getIdFromEntry(obj){
                if (typeof obj === 'string'){
                    return getId(obj);
                } else if (obj.id && typeof obj.id === 'string'){
                    return obj.id;
                } else if (obj.link && obj.link.length ){
                    for ( var i = 0, l = obj.link.length; i < l ; i++){
                        if (obj.link[i].type === 'text/html'){
                            return getId(obj.link[i].href)
                        }
                    }
                }
                log('could not find ID from object, maybe an unsupported API?')
                return '';
            }
            function getId(href){
                var id = '';
                if (!!href && href.indexOf('www.youtube.com/v/') > 0) {
                    id = getBefore(href.split('www.youtube.com/v/')[1], '?')
                } else if (!!href && href.indexOf('/embed/') > 0){
                    id = getBefore(href.split('/embed/')[1], '?');
                } else if (!!href && href.indexOf('?v=') > 0){// this could be version if API call!!
                    id = getBefore(href.split('?v=')[1],'&');
                } else if (!!href && href.indexOf('video:') > 0){
                    id = getBefore(href.split('video:')[1], ':');
                } else if (!!href){
                    id = href;
                }
                return id;
            }
            function getBefore(str, before){
                if (!!str && str.indexOf(before)){
                    str = str.split(before)[0];
                }
                return str;
            }
            function getIframeTemplate(innerWidth, innerHeight){
                var str = options.iframeTemplate;
                return str.replace('{options.innerHeight}', innerHeight).replace('{options.innerWidth}', innerWidth);
            }
            function open(e){
                var el = e.currentTarget;
                e.preventDefault();
                $('div.youtube-videogallery-bodycover').css( { 'height':$(document).height()} );
                $('div.youtube-videogallery-display').css({
                    'marginLeft':-options.innerWidth/2,
                    'marginTop':-options.innerHeight/2
                });
                $('#youtube-videogallery-iframe').attr( 'src', options.urlEmbed.replace("$id", $(el).attr('data-youtube-id') ) );
                $('body').addClass('youtube-videogallery-active');
            }
            function close(e){
                $('#youtube-videogallery-iframe').attr( 'src', 'about:blank');
                $('body').removeClass('youtube-videogallery-active');
            }
            function setButtonMargin(w, h, context){
                if (w === 0 || h === 0){
                    $(context).find("img.youtube-videogallery-play").remove();
                    return;
                }
                $(context).find("img.youtube-videogallery-play").css({
                    'marginLeft':-w/2 +'px',
                    'marginTop':-h/2 +'px'
                });
            }
            function getStyle(style){
                if (!!style){
                    return "youtube-videogallery-" + style;
                }
                return '';
            }
            function getTitleStyle(title){
                return title === 'full' ? 'youtube-videogallery-allowtitle' : '';
            }
            function getVideosFromFeed(data){
                var videos = [],
                    items = (data && data.data && data.data.items) ? data.data.items
                       : (data && data.feed && data.feed.entry) ? data.feed.entry : [];
                $( items ).each(function(i, item){
                    var id = getIdFromEntry(item);
                    videos.push({
                        id: getIdFromEntry(item),
                        title: item.title.$t || item.title
                    });
                });
                return videos;
            }
            /**
             * this.test = object
             *
             * Test object to expose private methods to a test API.
             * This allows us to test private methods, without
             * exposing them (e.g. they can't be overwritten)
             *
             */
            this.test = {
                getBefore:getBefore,
                getId:getId,
                getVideoLinks:getVideoLinks,
                getIframeTemplate:getIframeTemplate,
                getTitleStyle:getTitleStyle,
                getStyle:getStyle,
                getVideosFromFeed:getVideosFromFeed,
                getIdFromEntry:getIdFromEntry
            };
            function load($this, options) {
                var videos = ( options.videos.length ) ? options.videos : getVideoLinks($this),
                    html = '',
                    href, src, titleSpan, video,
                    playButtonSrc = (!!options.assetFolder) ? options.assetFolder +'/'+ options.playButton : options.playButton ,
                    img = document.createElement('img');
                img.onload = function(){
                    setButtonMargin(this.width, this.height, $this);
                };
                img.onerror = function(){
                    setButtonMargin(0, 0, $this);
                };
                img.src = playButtonSrc+'?'+ +(new Date());

                for (var i = 0, l = videos.length; i < l; i++){
                    video = videos[i];
                    if (!video.id){continue;}
                    href = options.urlLink.replace("$id", video.id);
                    src = options.urlImg.replace("$id", video.id);
                    titleSpan = (!!video.title && options.title !== 'none') ? '<span class="youtube-videogallery-title">'+ video.title +'</span>' : '';

                    html+= '<li class="youtube-videogallery-item"><a title="'+video.title+'" data-youtube-id="'+ video.id +'" href="'+ href +'" class="youtube-videogallery-link" style="width:'+options.thumbWidth+'px"><img class="youtube-videogallery-play" src="'+ playButtonSrc +'" title="play" /><img class="youtube-videogallery-img" src="'+ src +'" style="width:'+options.thumbWidth+'px" />'+ titleSpan +'</a></li>';
                }
                $this.empty()
                    .append(html)
                    .addClass('youtube-videogallery-container')
                    .addClass( getStyle( options.style ) )
                    .addClass( getTitleStyle( options.title ) );

                if (options.supported && options.plugin === 'colorbox' && $.colorbox){
                    $this.find("a.youtube-videogallery-link").each(function(i, el){
                        $(el)
                            .attr('href', options.urlEmbed.replace("$id", $(el).attr('data-youtube-id') ) )
                            .attr('aria-controls','youtube-videogallery-iframe')
                            .colorbox({iframe:true, innerWidth:options.innerWidth, innerHeight:options.innerHeight});
                    });
                } else if (options.supported && options.plugin === 'fancybox' && !!$().fancybox){
                    $this.find("a.youtube-videogallery-link").each(function(i, el){
                        $(el)
                            .attr('rel', 'media-gallery')
                            .fancybox(options.fancybox);
                    });
                } else if (options.supported && options.plugin === 'self'){
                    if (!$('div.youtube-videogallery-bodycover').length){
                        $('body')
                            .append('<div class="youtube-videogallery-bodycover"/>')
                            .append('<div class="youtube-videogallery-display">'+ getIframeTemplate(options.innerWidth, options.innerHeight) +'</div>');
                        $('div.youtube-videogallery-bodycover').on('click',close);
                        $(document).on('keydown', function(e) {
                            if (e.which === 27) {
                                close();
                            }
                        });
                    }
                    $this.find("a.youtube-videogallery-link").on('click',open);
                } else {
                    $this.find("a.youtube-videogallery-link")
                        .attr('target','_blank')
                        .append('<span class="youtube-videogallery-screen-reader-only">'+options.newWindow+'</span>')
                        .each(function(i, el){
                            $(el).attr('title', $(el).attr('title')+' '+ options.newWindow);
                        });
                }
                return $this;

            }

            // Set options
            options =  $.extend(defaults, options);
            options.supported = (
            /* don't show lightbox if: old untested jquery version, or the lightbox is bigger than the viewport */
                    !!$().on &&
                    ( $(window).width() > options.innerWidth || $(window).height() > options.innerHeight)
                );
            options.plugin = (isLegacyIE && !options.forceLegacyIE) ? 'none' : options.plugin;// by default turn off plugins for IE<=7

            // it's an API, load promise and return the original object for chaining
            if (!!options.apiUrl){
                var $this = this,
                    apiUrl = options.apiUrl,
                    jqxhr = $.ajax({
                        url:apiUrl,
                        dataType:"jsonp",
                        beforeSend:function(){
                            if (!options.apiFallbackUrl){
                                return;
                            }
                            $this.each(function(i, el){
                                $(el).empty()
                                    .append('<li><a /></li>')
                                    .find('a')
                                    .attr('href', options.apiFallbackUrl)
                                    .text(options.apiFallbackUrl);
                            });
                        }})
                        .done(function(data) {
                            options.videos = getVideosFromFeed(data);
                            $this.each(function(i, el){
                               load($(el), options);
                            });
                        })
                        .fail(function(){
                            log('Error getting youtube API requested by jQuery.youtubeVideoGallery: '+ apiUrl);
                        });
                return $this;
            }
            return this.each(function(i, el){
                load($(el), options);
            });
        }
    });

})(window.jQuery);
     </script>
   <script>
      $(document).ready(function(){var val1= $("#string").text();  
          $("ul.youtube-video-gallery1").youtubeVideoGallery({
            
            apiFallbackUrl: 'https://www.youtube.com/results?search_query=Digital+Life',
              apiUrl: 'https://gdata.youtube.com/feeds/api/videos?q='+ val1 +'&orderby=viewCount&start-index=1&alt=json&max-results=30&v=2'
          });
      });
  </script>
  <script>
      $(document).ready(function(){
          $("ul.youtube-video-gallery2").youtubeVideoGallery({
              apiFallbackUrl: 'https://www.youtube.com/results?search_query=innovation+news',
              apiUrl: 'https://gdata.youtube.com/feeds/api/videos?q=innovation+news&orderby=viewCount&start-index=1&alt=json&max-results=30&v=2'
          });
      });
  </script>
  <script>
      $(document).ready(function(){
          $("ul.youtube-video-gallery3").youtubeVideoGallery({
              apiFallbackUrl: 'https://www.youtube.com/results?search_query=Technology+news',
              apiUrl: 'https://gdata.youtube.com/feeds/api/videos?q=Technology+news&orderby=viewCount&start-index=1&alt=json&max-results=30&v=2'
          });
      });
  </script>
    
    </html>



